<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>RaceMann Pilot — Debug</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="wrap">
    <header class="top">
      <div class="title">RaceMann Pilot — Debug</div>
      <div id="healthPill" class="pill pill-bad">/health …</div>
    </header>

    <section class="card">
      <div class="h">НАСТРОЙКИ</div>

      <label class="lbl">Worker API (не меняй, если всё ок)</label>
      <input id="apiBase" class="inp" type="url" spellcheck="false" />

      <label class="lbl">Ссылка на заезд (RaceMann)</label>
      <input id="raceUrl" class="inp" type="url" spellcheck="false" placeholder="https://miks.racemann.com/Race/id/....#race" />

      <label class="lbl">Номер карта (как в RaceMann: 05, 10, 19 и т.д.)</label>
      <input id="kart" class="inp" type="text" inputmode="numeric" placeholder="05" />

      <label class="lbl">Период опроса, мс</label>
      <input id="pollMs" class="inp" type="number" min="250" step="50" value="1000" />

      <div class="btnRow">
        <button id="btnShowId" class="btn btn-primary">Показать Race ID</button>
        <button id="btnStart" class="btn">Старт</button>
        <button id="btnStop" class="btn btn-ghost">Стоп</button>
      </div>

      <div class="mini">
        <div><span class="k">Race ID</span> <span id="raceId" class="v">—</span></div>
        <div><span class="k">Normalized</span> <span id="normalized" class="v mono">—</span></div>
        <div><span class="k">Kart</span> <span id="kartOut" class="v">—</span></div>
        <div><span class="k">Status</span> <span id="conn" class="v">idle</span></div>
      </div>

      <pre id="debug" class="debug">{}</pre>
    </section>

    <section class="dash">
      <div class="tile">
        <div class="label">LAST LAP</div>
        <div id="lastLap" class="value">—</div>
        <div id="delta" class="sub">Δ к best: —</div>
      </div>
      <div class="tile">
        <div class="label">BEST LAP</div>
        <div id="bestLap" class="value purple">—</div>
      </div>
    </section>
  </div>

  <script src="app.js"></script>
</body>
</html>